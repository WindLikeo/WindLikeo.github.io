<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机网络 | WindLike</title><meta name="author" content="WindLike"><meta name="copyright" content="WindLike"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="教材： 计算机网络-自顶向下方法第七版 Computer networking_ a top-down approach-Pearson (2017) 计算机网络（第五版）—— Andrew S.Tanenbaum, David J.Wetherall 视频： 中科大郑烇、杨坚全套《计算机网络（自顶向下方法 第7版，James F.Kurose，Keith W.Ross）》课程 课程主要内容  计">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络">
<meta property="og:url" content="https://windlikeo.github.io/2024/09/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.html">
<meta property="og:site_name" content="WindLike">
<meta property="og:description" content="教材： 计算机网络-自顶向下方法第七版 Computer networking_ a top-down approach-Pearson (2017) 计算机网络（第五版）—— Andrew S.Tanenbaum, David J.Wetherall 视频： 中科大郑烇、杨坚全套《计算机网络（自顶向下方法 第7版，James F.Kurose，Keith W.Ross）》课程 课程主要内容  计">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://windlikeo.github.io/Images/avatar.png">
<meta property="article:published_time" content="2024-09-19T02:23:30.000Z">
<meta property="article:modified_time" content="2024-11-05T13:19:42.469Z">
<meta property="article:author" content="WindLike">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://windlikeo.github.io/Images/avatar.png"><link rel="shortcut icon" href="/img/fav.png"><link rel="canonical" href="https://windlikeo.github.io/2024/09/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=5.0.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"距离上次更新已经过去","messageNext":"天，文章内容可能过时"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-05 21:19:42'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/Images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">WindLike</span></a><a class="nav-page-title" href="/"><span class="site-name">计算机网络</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-09-19T02:23:30.000Z" title="发表于 2024-09-19 10:23:30">2024-09-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-05T13:19:42.469Z" title="更新于 2024-11-05 21:19:42">2024-11-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="教材：">教材：</h3>
<p>计算机网络-自顶向下方法第七版<br>
Computer networking_ a top-down approach-Pearson (2017)<br>
计算机网络（第五版）—— Andrew S.Tanenbaum, David J.Wetherall</p>
<h3 id="视频：">视频：</h3>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1JV411t7ow/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=569984111fa2eb6fae0bef2c455de6bd">中科大郑烇、杨坚全套《计算机网络（自顶向下方法 第7版，James F.Kurose，Keith W.Ross）》课程</a></p>
<h3 id="课程主要内容">课程主要内容</h3>
<ul>
<li>计算机网络和互联网</li>
<li>应用层</li>
<li>传输层</li>
<li>网络层：数据平面</li>
<li>网络层：控制平面</li>
<li>数据链路层和局域网</li>
<li>网络安全</li>
<li>无线和移动网络</li>
<li>多媒体网络</li>
<li>网络管理</li>
</ul>
<p>每一章大致分为两部分，前半部分介绍这一层次的原理，包括这一层次的主要功能和提供的服务。每一层的功能都通过向上层提供的接口向上层提供服务，然后是这个功能借助于下层所提供的服务怎么样在功能实体的内部通过软硬件的安排来实现这个功能；后半部分为实例部分，以互联网当前这个层次用的比较多的协议作为例子来讲解。</p>
<h1>Chapter 1 Computer Networks and the Internet</h1>
<p>在本章中将概述计算机网络和互联网</p>
<p>This first chapter presents a broad overview of computer networking and the Internet. The goal is to paint a broad picture  and set the context for the rest of this book.</p>
<p>脉络：</p>
<ul>
<li>介绍一些terminology(基本术语)和概念。</li>
<li>研究构成网络的基本的硬件、软件组件。</li>
<li>从the network’s edge开始，研究在网络中运行的end systems(端系统)和network applications(网络应用程序)。</li>
<li>探索the core of a computer network，研究传输数据的links、switches,以及连接end systems和the network core的the access networks 和 physical media。认识到互联网是网络的网络，并了解这些网络是如何与彼此相连的。</li>
<li>研究计算机网络中的delay, loss, and throughput of data和提供端到端吞吐量和延迟的简单定量模型。这些模型考虑到了transmission, propagation, and queuing delays。</li>
<li>介绍计算机网络中的一些关键架构原则，即protocol layering和service models。</li>
<li>了解计算机网络容易受到多种不同类型的攻击，并考虑如何提高计算机网络的安全性。</li>
<li>最后简要介绍计算机网络的历史。</li>
</ul>
<h2 id="1-1-What-Is-the-Internet">1.1 What Is the Internet?</h2>
<p>节点：</p>
<ul>
<li>主机及其上运行的应用程序</li>
<li>路由器、交换机等网络交换设备<br>
边：</li>
<li>接入网链路(access?)：主机连接到互联网的链路（即主机与网络交换设备之间的边）</li>
<li>主干/骨干链路(backbone)：网络交换设备之间的边<br>
对于互联网<br>
它的节点是数以亿计互联的计算设备和分组交换设备构成，之间以通信链路相连？通信链路传输速率指标为带宽(bps/bit per second)。<br>
协议主要以TCP/IP为主<br>
协议定义：对等层的实体在通信的过程中应该遵守的规则的集合。<br>
协议发送接收的称作协议数据单元(Protocol Data Unit)，在不同层次指代的含义不一样<br>
例：如规定实体之间什么时间发送报文，什么时间接收报文，按什么规则解析报文格式</li>
</ul>
<h3 id="1-1-1-A-Nuts-and-Bolts-Description">1.1.1 A Nuts-and-Bolts Description</h3>
<p>过去，The Internet is a <strong>computer network</strong> that interconnects billions of computing devices throughout the world. 但是现在,有许多nontraditional Internet “things” 比如笔记本电脑, 手机, 平板, 电视, 游戏机, 车, 手表等被连接到了互联网中. Indeed, the term <strong>computer network</strong> 听起来有些过时。所以在互联网术语中，这些设备被叫做hosts or end systems。</p>
<p>End sytstems由a network of <strong>communication links(通信链路)</strong> and <strong>packet switches(分组交换机)</strong>。有许多种communication links,由许多不同的physical media(物理媒介)组成，包括coaxial cable(同轴电缆), copper wire(铜线), optical fiber(光纤), and radio spectrum(无线电频谱)。不同的links传输数据的速率不同，单位为bits/second(带宽)。</p>
<p>一个端系统向另一个端系统发送数据时，发送方需要对数据分段，并对每段加上header bytes。The resulting packages of information, known as packets in the jargon of computer networks,然后这些packets被发送到接收方，在那再重新组装为初始数据。</p>
<p>A packet switch接收从某条输入communication links到达的packet，并将其转发到某条输出communication links上。Packet switches有许多种类，现在常见的两种类型是routers(路由器) and link-layer switches(链路层交换机)。前者通常用于the network core，后者通常用于access networks。</p>
<p>一个packet从发送方到接收方所经过的communication links and packet switches的序列称为route or path through the network<br>
以高速公路运输网络为例，则a packet可以看作一辆装载了货物的卡车，communication links类似于高速公路或公路、packet switch类似于交叉路口，而end system类似于建筑物。</p>
<p>End systems通过Internet Service Providers(ISPs)访问互联网。每个ISP本身就是a network of packet switches and communication links。ISPs 提供a variety of types of network access 给the end systems,同时也提供Internet access to content providers, connecting Web sites and video servers directly to the Internet. The Internet将所有相关的端系统彼此连接起来，则给端系统提供access的ISPs也必须相连。较低层次的ISPs通过国家的、国际的较高层次的ISPs(Level 3 Communications, AT&amp;T, Sprint, and NTT)相连。较高层次的ISPs是由high-speed routers interconnected with high-speed fiber-optic links组成的。每个ISP network都是独立管理的，运行IP协议，遵从一定命名和地址规则。</p>
<p>End systems, packet switches, and other pieces of the Internet都运行protocols(协议)。这些协议控制着在互联网中信息的发送和接收。The <strong>Transmission Control Protocol(TCP)</strong> 和the <strong>Internet Protocol(IP)</strong> 是互联网中最重要的两个协议。IP协议指定了在routers和end systems之间发送和接收的packets的格式。The Internet’s principal protocols被统称为 <strong>TCP/IP</strong></p>
<p>鉴于协议对互联网的重要性，每个人都要对协议及其作用达成一致认识是重要的，这样人们可以创造systems and products that interoperate。这也是标准起作用的地方。Internet standards由Internet Engineering Task Force(IETF)发展制定。The IETF standards documents被称为requests for comments (RFCs)。RFCs最初只是general requests for comments以解决互联网先驱面对的network and protocol design problems。RFCs tend to be quite technical and detailed。RFCs定义了TCP、IP、HTTP和SMTP等协议。Ethernet(以太网)和wireless WiFi standards由The IEEE 802 LAN/MAN Standards Committee [IEEE 802 2016]定义。</p>
<p>Figure1.1中术语一栏：<br>
Host/End system, Server, Mobile, Router, Link-layer switch, Modem, Base station</p>
<h3 id="1-1-2-A-Services-Description">1.1.2 A Services Description</h3>
<p>上述讨论了many of the pieces that make up the Internet。但还可以从另一个完全不同的角度来描述the Internet，as an infrastructure that provides services to applications。除了传统的e-mail和Web surfing, Internet applications include mobile smartphone and tablet applications, including Internet messaging, mapping with real-time road traffic information, music streaming from the cloud, movie and television streaming, online social networks, video conferencing, multi-person games, and location-based recommendation systems。这些应用被称作distributed applications，因为他们包含多个彼此交换数据的端系统。重要的是，互联网应用程序在端系统上运行，而不是运行在the packet switches in the network core。尽管packet switches加速端系统之间的数据交换，但他们并不关心应用程序 that is the source of sink of data。</p>
<p>进一步地探索what we mean by an infrastructure that provides services to applications.当你开发完了一个分布式互联网应用程序后，the programs running on the different end systems will nee to send data to each other。问题在于描述the Internet as a platform for applications。那么一个运行在端系统的应用程序该怎么指示互联网发送数据到运行在另一个端系统的另一个应用程序呢？</p>
<p>连接到互联网的end systems提供一个socket interface(套接字接口) that 规定在一个端系统上运行的程序如何要求互联网基础设施向另一个端系统上运行的特定目标程序发送数据。这个互联网套接字接口是发送方程序必须遵守的一套规则，以便互联网能将数据传送到目标程序。</p>
<p>the Internet 给应用程序提供多种服务，当我们开发一个互联网应用程序时，也必须为我们的互联网应用程序选择某一个互联网服务。</p>
<h3 id="1-1-3-What-Is-a-Protocol">1.1.3 What Is a Protocol?</h3>
<p>由Human protocol场景可知，我们需要specific messages we send, and specific actions we take in response to the received reply messages or other events(such as no reply within some given amount of time)。还存在另一种协议情况是the transmission and receipt of messages, and a set of conventional actions taken when these messages are sent and received.</p>
<p>网络协议类似于人类协议, 只是交换信息和采取行动的实体是一些设备的软硬件组件。在互联网中的所有包含两个或以上的远程通信实体的活动都要受协议的制约。</p>
<p>定义一个协议的关键元素是the exchange of messages and the actions taken when these messages are sent and received。<br>
即一个protocol定义了在两个或更多通信实体之间交换的messages的格式和次序，以及发送和接收message或其他事件采取的动作</p>
<h2 id="1-2-The-Network-Edge">1.2 The Network Edge</h2>
<p>Access Network——the network that physically connects an end system to the first router on a path from the end system to any other distant end system</p>
<p>Today, the two most prevalent types of broadband residential access are digital subscriber line and cable.</p>
<p>A residence typically obtains DSL Internet access from the same local telephone company (telco) that provides its wired local phone access.</p>
<p>边缘系统<br>
接入网将边缘接入到核心<br>
网络核心的作用就是数据交换</p>
<p>C/S模式（客户端服务器模式）：<br>
缺点在于可扩展性较差，即随着请求载荷的增加，它的能力是下降的。同时它的下降是到达某一阈值后断崖式地下降。</p>
<p>P2P模式（Peer-Peer）：<br>
Peer指的是对等体，也是一个分布式应用进程，特点是每个节点即既是客户端也是服务器。</p>
<p>基础设施向应用进程提供的通信服务有两种方式：面向连接和无连接<br>
面向连接服务的特点：通信之前要“握手”，即接收方和发送方都要都做好准备。</p>
<p>面向连接和有连接时有区别的，前者在于连接状态只有端系统维持。</p>
<p>TCP服务可靠保序，流量控制</p>
<p>UDP无连接</p>
<h1>数据链路层</h1>
<p>接下来学习的是网络模型中的第二层——数据链路层。这涉及到两台相邻机器如何实现可靠有效的完整信息块（称为帧）通信的方法。相邻指的是两台机器通过一条<strong>通信信道</strong>连接起来。</p>
<h2 id="数据链路层的设计问题">数据链路层的设计问题</h2>
<p>数据链路层使用物理层提供的服务在通信信道上发送和接收比特。它要完成如下基本功能：</p>
<ol>
<li>向网络层提供一个定义良好的服务接口。</li>
<li>处理传输错误。</li>
<li>调节数据流，确保慢速的接收方不会被快速的发送方淹没。</li>
</ol>
<p>为了实现这些目标，数据链路层从网络层获得数据包的时候，会将这些数据包封装成帧以便传输。每个帧包含一个帧头、一个有效载荷（用于存放数据包）以及一个帧尾。</p>
<h3 id="提供给网络层的服务">提供给网络层的服务</h3>
<p>数据链路层的功能是为网络层提供服务。最主要的服务是将数据从源机器（发送方）的网络层传输到目标机器（接收方）的网络层。为描述方便，接下来以发送方指代源机器，接收方指代目标机器。<br>
实际的传输过程中，我们的数据会经由发送方的网络层，数据链路层，物理层，再到接收方的物理层，数据链路层，网络层。但该过程可以抽象成两个数据链路层的进程使用一个数据链路协议进行通信。两者可以建模如下：<br>
<img src="/Images/computer_network/image1.png" alt="img1"><br>
接下来，我们基于后者抽象模型进行描述。<br>
数据链路层实际提供的服务因具体协议而有所差异。一般情况下，数据链路层通常会提供以下3种可能的服务：</p>
<ol>
<li>无确认的无连接的服务（Unacknowledged connectionless service）</li>
<li>有确认的无连接的服务（Acknowledged connectionless service）</li>
<li>有确认的有连接的服务（Acknowledged connection-oriented service）</li>
</ol>
<p>具体的，无确认的无连接服务是指发送方向接收方发送独立的帧，接收方对这些帧不作确认。显然这忽视了数据受损的情况，因此这类服务适用于错误率很低的场合，此时差错恢复过程可以留给上层完成，或者是实时通信的场合，此时数据迟到比数据受损更糟糕。</p>
<p>那么有确认的无连接服务。此时数据链路层同样没有使用逻辑连接，但其发送的每一帧都需要进行确认。这种服务下，发送方可以知道帧是否正确到达目的地，并且如果一个帧在指定的时间间隔内还没有到达，发送方可以重新发送（超时重发）。此类服务适用于不可靠的信道，比如无线系统，802.11（WiFi）就是典型的例子。</p>
<p>最后是有确认的有连接的服务。这显然是在数据链路层向网络层提供的最复杂的服务。发送方和接收方在传输任何数据前要建立一个连接。连接上发送的每一帧都被编号，数据链路层确保发出的帧都会被接收方真正接收，并且每个帧将按正确的顺序被接收，且只被接收一次。因此，有连接的服务相当于为网络层提供了一个可靠的比特流。它适用于长距离且不可靠的链路，比如卫星信道或长途电话电路，即丢失确认可能导致一个帧被收发多次，因而浪费带宽。<br>
当使用有连接的服务时，数据传输必须经过三个不同的阶段。在第一个阶段，要建立连接，双方初始化各种变量和计数器，这些变量和计数器记录了哪些帧已经接收到，哪些帧未被接收到。在第二个阶段，才真正传输一个或多个数据帧。在最后一个阶段，连接被释放，所有的变量、缓冲区以及其他用于维护该连接的资源也随之被释放。</p>
<p>注意，在数据链路层<strong>提供确认</strong>，只是一种<strong>优化手段</strong>。这也会带来相应的代价。如果提供确认是必需的，就不会有无确认的服务存在。提供确认所导致的额外开销可能有</p>
<ul>
<li>带宽消耗：发送方每传输一个数据帧，接收方需要发送一个确认帧（ACK）。这些确认帧会占用额外的带宽。</li>
<li>延迟：传输确认帧会导致一定的延迟，尤其是在长距离通信中。</li>
<li>处理开销：发送方和接收方需要额外的计算资源来处理确认帧</li>
<li>重传开销：如果由于错误未能收到确认帧，发送方必须重传数据帧，这会消耗额外的带宽和资源，并可能增加整体传输时间。<br>
……</li>
</ul>
<h3 id="成帧">成帧</h3>
<p>背景：数据链路层要对物理层向其提供的原始比特流进行处理。物理层所传递的比特流不能保证没有错误，因此数据链路层有必要的话，也需要检测错误和纠正错误。<br>
做法：通常数据链路层将连续的比特流拆分成多个离散的帧，为每个帧计算一个称为校验和的令牌，并将该校验和放在帧中一起进行传输。接收方收到帧的时候，便重新计算该帧的校验和判断传输是否出错。<br>
显然，我们要考虑如何拆分比特流，既要容易识别帧，同时占用的信道带宽也要尽可能得少。<br>
书中介绍了四种方法</p>
<ul>
<li>字节计数法：利用头部中的一个字段来标识该帧中的字符数。数据链路层看到字符计数值时，就知道该帧到哪里结束。字节计数法缺陷明显，计数值有可能在传输中发生错误而混淆变化，导致无法找到下一帧的正确起始位置。</li>
<li>字节填充的标志字节法：</li>
<li>比特填充的标志比特法</li>
<li>物理层编码违禁法：</li>
</ul>
<h2 id="滑动窗口协议">滑动窗口协议</h2>
<h3 id="回退N协议（Go-Back-N）">回退N协议（Go-Back-N）</h3>
<p>考虑一个帧到达接收方所需要的传输时间加上确认帧返回的传输时间。那么长发送时间、高带宽和短帧三者组合在一起，会大大地降低效率。例如：</p>
<blockquote>
<p>考虑一个卫星信道，往返传播延迟为500ms，即过去要250ms，回来要250ms。<br>
假设在该信道发送一个1000位的帧（相较带宽而言的短帧），只需要20ms。那么在t=20ms的时候，该帧被完全发送出去；直到t=270ms的时候，该帧才完全到达接收方；在t=520ms的时候，确认帧才回到发送方，而且这还是最好的情况。<br>
我们会发现，发送方从发送帧到确认帧返回的这段时间里，总计520ms的时间，只利用了发送帧的20ms，即有96%的时间是被阻塞的，或者说，只有4%的有效带宽被利用了</p>
</blockquote>
<p>如上问题是受到如下限制的结果：<strong>发送方在发送下一帧之前必须等待前一帧的确认</strong>。显然，我们可以考虑是不是可以放宽限制，允许发送方在阻塞之前发送多达w个帧，以获得更好的带宽利用率。<br>
那么新的问题便是，如何找到一个合适的w值，使得发送方可以连续发送帧，并且在发送窗口被填满之前，前面发送的帧的确认就已返回（避免阻塞）。首先，我们需要知道在一帧从发送方传播到接收方期间信道上能容纳多少帧。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://windlikeo.github.io">WindLike</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://windlikeo.github.io/2024/09/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">https://windlikeo.github.io/2024/09/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://windlikeo.github.io" target="_blank">WindLike</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post-share"><div class="social-share" data-image="/Images/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="prev-post pull-left" href="/2024/09/19/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E6%A2%A6%E5%B7%A5%E5%8E%82/" title="游戏设计梦工厂"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">游戏设计梦工厂</div></div></a><a class="next-post pull-right" href="/2024/09/18/CG/" title="GAMES101"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">GAMES101</div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info is-center"><div class="avatar-img"><img src="/Images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">WindLike</div><div class="author-info-description">平安顺遂，万事如意</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/WindLikeo"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Just for learning. 科学上网以便公式渲染正确</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%99%E6%9D%90%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">教材：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">视频：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="toc-number">3.</span> <span class="toc-text">课程主要内容</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number"></span> <span class="toc-text">Chapter 1 Computer Networks and the Internet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-What-Is-the-Internet"><span class="toc-number"></span> <span class="toc-text">1.1 What Is the Internet?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-A-Nuts-and-Bolts-Description"><span class="toc-number">1.</span> <span class="toc-text">1.1.1 A Nuts-and-Bolts Description</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-A-Services-Description"><span class="toc-number">2.</span> <span class="toc-text">1.1.2 A Services Description</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-What-Is-a-Protocol"><span class="toc-number">3.</span> <span class="toc-text">1.1.3 What Is a Protocol?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-The-Network-Edge"><span class="toc-number"></span> <span class="toc-text">1.2 The Network Edge</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number"></span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E8%AE%BE%E8%AE%A1%E9%97%AE%E9%A2%98"><span class="toc-number"></span> <span class="toc-text">数据链路层的设计问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BE%9B%E7%BB%99%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">提供给网络层的服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%B8%A7"><span class="toc-number">2.</span> <span class="toc-text">成帧</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE"><span class="toc-number"></span> <span class="toc-text">滑动窗口协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E9%80%80N%E5%8D%8F%E8%AE%AE%EF%BC%88Go-Back-N%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">回退N协议（Go-Back-N）</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/16/tencent/" title="tencent">tencent</a><time datetime="2024-11-16T01:52:51.000Z" title="发表于 2024-11-16 09:52:51">2024-11-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/10/dip/" title="数字图像处理">数字图像处理</a><time datetime="2024-10-10T10:03:46.000Z" title="发表于 2024-10-10 18:03:46">2024-10-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/23/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" title="软件工程">软件工程</a><time datetime="2024-09-23T12:31:24.000Z" title="发表于 2024-09-23 20:31:24">2024-09-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/23/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" title="编译原理">编译原理</a><time datetime="2024-09-23T02:37:44.000Z" title="发表于 2024-09-23 10:37:44">2024-09-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/19/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E6%A2%A6%E5%B7%A5%E5%8E%82/" title="游戏设计梦工厂">游戏设计梦工厂</a><time datetime="2024-09-19T12:59:08.000Z" title="发表于 2024-09-19 20:59:08">2024-09-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By WindLike</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.0.0"></script><script src="/js/main.js?v=5.0.0"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css')
    if (false) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script></div></div></body></html>